import{_ as n}from"./_plugin-vue_export-helper.cdc0426e.js";import{o as e,c as t,f as o,a as s,b as a,e as p}from"./app.918ef0ee.js";const r={},c=s("p",null,[a("有时候情况比较复杂，难以编写规则提取需要的内容，可以使用 "),s("code",null,"@filter:"),a(" 规则进行资源嗅探。")],-1),l=s("p",null,"嗅探的原理将来源网址在内部WebView中加载执行，拦截其所有访问到的子请求URL，直到符合嗅探规则时，将这个URL返回。",-1),i=p(`<h2 id="嗅探-filter-规则" tabindex="-1"><a class="header-anchor" href="#嗅探-filter-规则" aria-hidden="true">#</a> 嗅探 <code>@filter:</code> 规则</h2><p>嗅探规则一般只在获取正文内容是使用。</p><p><strong>格式如下：</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>@filter:[regexp]
@filter:[regexp]@@[timeout]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><code>timeout</code>: 超时设置，默认 8 秒。</p><p><strong>例子：</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 将上一个规则输出内容作为url，嗅探出含用m3u8或mp4的子请求url并返回 {&quot;url&quot;: URL地址 }</span>
<span class="token comment">// 然后使用json规则读取url字段的内容</span>

@filter<span class="token operator">:</span><span class="token punctuation">(</span><span class="token operator">?</span><span class="token operator">:</span>m3u8<span class="token operator">|</span>mp4<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token operator">?</span><span class="token operator">:</span>$<span class="token operator">|</span><span class="token operator">/</span><span class="token operator">|</span>\\<span class="token operator">?</span><span class="token operator">|</span><span class="token operator">&amp;</span><span class="token punctuation">)</span>@json<span class="token operator">:</span>$<span class="token punctuation">.</span><span class="token punctuation">.</span>url

<span class="token comment">// 增加了超时参数 ‘@@16’，16 秒超时（默认 8 秒）</span>
@filter<span class="token operator">:</span><span class="token punctuation">(</span><span class="token operator">?</span><span class="token operator">:</span>m3u8<span class="token operator">|</span>mp4<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token operator">?</span><span class="token operator">:</span>$<span class="token operator">|</span><span class="token operator">/</span><span class="token operator">|</span>\\<span class="token operator">?</span><span class="token operator">|</span><span class="token operator">&amp;</span><span class="token punctuation">)</span>@@<span class="token number">16</span>@json<span class="token operator">:</span>$<span class="token punctuation">.</span><span class="token punctuation">.</span>url
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container tip"><p class="custom-container-title">提示</p><p>嗅探功能比较耗费用户设备资源，而且目前只兼容 Android 、Windows 平台，建议慎用。</p></div>`,8);function u(d,m){return e(),t("div",null,[c,l,o(" more "),i])}const _=n(r,[["render",u],["__file","003.html.vue"]]);export{_ as default};
